"use strict";angular.module("webApp",["ngResource"]),angular.module("webApp").controller("MainCtrl",["$scope","$resource",function(a,b){var c=b("https://calm-meadow-37274.herokuapp.com/company/:companyId",{companyId:"@id"},{update:{method:"PUT"}});b("https://calm-meadow-37274.herokuapp.com/company/:companyId/owner/:ownerId",{companyId:"@id",ownerId:"@id"});a.companies=c.query(),a.currentCompany={},a.addCompany=function(){var b={name:"New Company",owners:[{}]};a.companies.unshift(b),a.currentCompany=b},a.addOwner=function(a){var b={name:"New Owner"};a.owners.unshift(b)},a.createCompany=function(a){c.save(a,function(b){a.id=b.id})},a.showDetails=function(b,d){b.id&&(a.currentCompany==b?a.currentCompany={}:c.get({companyId:b.id},function(b){a.companies.splice(d,1,b),a.currentCompany=b}))},a.$watchCollection(["currentCompany","currentCompany.owners"],function(b){a.currentCompany.id&&c.update({companyId:a.currentCompany.id},a.currentCompany)}),a.removeCompany=function(b,c){b.id?b["delete"](function(){a.companies.splice(c,1)}):a.companies.splice(c,1)},a.removeOwner=function(a,b,c){b.id?b["delete"](function(){a.owners.splice(c,1)}):a.owners.splice(c,1)}}]),angular.module("webApp").run(["$templateCache",function(a){a.put("views/main.html",'<div> <h2>Companies Management</h2> <h4>List of companies</h4> <button ng-click="addCompany()">Add New Company</button> <ul> <li ng-repeat="company in companies"> <a ng-click="showDetails(company, $index)">{{company.name}}</a> <button ng-show="currentCompany == company" ng-click="removeCompany(currentCompany, $index)">Remove</button> <form name="companyForm"> <table ng-show="$parent.currentCompany == company"> <tr><td>Name</td><td><input type="text" ng-model="company.name" required></td></tr> <tr><td>Address</td><td><input type="text" ng-model="company.address" required></td></tr> <tr><td>City</td><td><input type="text" ng-model="company.city" required></td></tr> <tr><td>Country</td><td><input type="text" ng-model="company.country" required></td></tr> <tr><td>Email</td><td><input type="text" ng-model="company.email"></td></tr> <tr><td>Phone</td><td><input type="text" ng-model="company.phone"></td></tr> <tr><td>Owners</td><td> <button ng-click="addOwner(company)">Add Owner</button> <ol> <li ng-repeat="owner in company.owners"> <input type="text" ng-model="owner.name" required> <button ng-show="company.owners.length > 1" ng-click="removeOwner(company, owner, $index)">Remove</button> </li> </ol> </td></tr> </table> <button ng-show="!company.id" ng-click="companyForm.$valid && createCompany(currentCompany)"> Create Company</button> </form> </li> </ul> </div>')}]);